

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Collector &mdash; phpReport 2.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Calculator" href="calculator.html" />
    <link rel="prev" title="Calculation" href="calculation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> phpReport
          

          
          </a>

          
            
            
              <div class="version">
                2.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="actions.html">Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="prototype.html">Prototyping</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataInput.html">Data input</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataOutput.html">Data output</a></li>
<li class="toctree-l1"><a class="reference internal" href="group.html">Group changes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="calculation.html">Calculation</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Collector</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#row-counter-collector">Row counter collector</a></li>
<li class="toctree-l3"><a class="reference internal" href="#group-counter-collector">Group counter collector</a></li>
<li class="toctree-l3"><a class="reference internal" href="#total-collector">Total collector</a></li>
<li class="toctree-l3"><a class="reference internal" href="#accessing-values">Accessing values</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#row-counter">Row counter</a></li>
<li class="toctree-l2"><a class="reference internal" href="#group-counter">Group counter</a></li>
<li class="toctree-l2"><a class="reference internal" href="calculator.html">Calculator</a></li>
<li class="toctree-l2"><a class="reference internal" href="sheet.html">Sheet</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sugar.html">Methods returning information</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods.html">Overview of methods and properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="gettingValues.html">Getting values</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">phpReport</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="calculation.html">Calculation</a> &raquo;</li>
        
      <li>Collector</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/gpoehl/phpReport/blob/master//docs/collector.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="collector">
<h1>Collector<a class="headerlink" href="#collector" title="Permalink to this headline">¶</a></h1>
<p>phpReport has a very powerful feature to calculate values and increment counters.
Each value and counter is implemented as a calculator object. These objects
will be assigned to one collector.</p>
<p>phpReport instantiates the following collectors.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All entities assigned to one of those collectors are cumulated to
higher group levels.</p>
</div>
<div class="section" id="row-counter-collector">
<h2>Row counter collector<a class="headerlink" href="#row-counter-collector" title="Permalink to this headline">¶</a></h2>
<p>The row counter collector is named <strong>rc</strong>. For each data dimension one CalculatorXS
object will be instantiated.</p>
</div>
<div class="section" id="group-counter-collector">
<h2>Group counter collector<a class="headerlink" href="#group-counter-collector" title="Permalink to this headline">¶</a></h2>
<p>The group counter collector is named <strong>gc</strong>. For each defined group one CalculatorXS
object will be instantiated.</p>
</div>
<div class="section" id="total-collector">
<h2>Total collector<a class="headerlink" href="#total-collector" title="Permalink to this headline">¶</a></h2>
<p>The total collector is named <strong>total</strong>. The collector is used to hold all calculator
objects instantiated by the calculate() method and the sheet objects instantiated
by the sheet() method.</p>
<p>You can assign further collectors, sheets or calculators to this total collector
or any other collector in this tree.
So it’s possible to build a hirachichal structure of calculated values.</p>
</div>
<div class="section" id="accessing-values">
<h2>Accessing values<a class="headerlink" href="#accessing-values" title="Permalink to this headline">¶</a></h2>
<p>There are multiple options to access calculated values. The long version looks
like</p>
<p>$this-&gt;rep-&gt;*collectorName*-&gt;items[<em>itemName</em>].</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$rep</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">report</span><span class="p">;</span>
<span class="nv">$rep</span><span class="o">-&gt;</span><span class="na">t</span><span class="o">-&gt;*</span><span class="nx">name</span><span class="o">*</span><span class="p">;</span>
<span class="nv">$rep</span><span class="o">-&gt;</span><span class="na">t</span><span class="p">[</span><span class="s1">&#39;*name*&#39;</span><span class="p">];</span>
<span class="nv">$rep</span><span class="o">-&gt;</span><span class="na">rc</span><span class="p">;</span>
<span class="nv">$rep</span><span class="o">-&gt;</span><span class="na">rc</span><span class="o">-&gt;</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="nv">$rep</span><span class="o">-&gt;</span><span class="na">rc</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="row-counter">
<h1>Row counter<a class="headerlink" href="#row-counter" title="Permalink to this headline">¶</a></h1>
<p><strong>phpReport</strong> always counts all read data rows.</p>
<p>For each data dimension one CalculatorXS object will be instantiated as an item
within an collector named <strong>rc</strong>.</p>
<p>Using the same objects for incrementing counters as calculating any values provides
you the same methods for accessing the results. This includes also that row
counters are available at each group level.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only the last data diminsion has counters for all group levels.
First data dimensions serve counters down to the group(s) declared
in it.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$this-&gt;rep = new Report();
//
// Some code here ...
//
$this-&gt;rep-&gt;rc-&gt;items[*dimensionID*]-&gt;sum(*level*).
</pre></div>
</div>
<p>Example:
.. code-block:: php</p>
<blockquote>
<div><p>$this-&gt;rep = new Report();
$rc = $this-&gt;rep-&gt;rc;
// sum of rows read in all data dimensions at the current group level
$rc-&gt;sum();
// sum of rows read in all data dimensions at group level = 2
$rc-&gt;sum(2);
// sum of rows read in data dimensions 0 at current group level
$rep-&gt;rc-&gt;{0}-&gt;sum();
$rep-&gt;rc-&gt;items[0]-&gt;sum();     // That’s the same
// sum of rows read in data dimensions 1 at group level = 2
$rep-&gt;rc-&gt;{1}-&gt;sum(2);
$rep-&gt;rc-&gt;items[1]-&gt;sum(2);     // That’s the same</p>
</div></blockquote>
</div>
<div class="section" id="group-counter">
<h1>Group counter<a class="headerlink" href="#group-counter" title="Permalink to this headline">¶</a></h1>
<p>As soon as you declare groups <strong>phpReport</strong> counts how often a group occurs
in the higher level group.</p>
<p>For each group one CalculatorXS object will be instantiated as an item
within an collector named <strong>gc</strong>.</p>
<p>Group counters are, like any other calculated value, available at each group level.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Default group levels are usually not what you want. You have to ask for
the sum of a higher level and not of the current level.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Use a negative value for the group level. -1 means the level above
the current level.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$this-&gt;rep = new Report();
//
// Some code here ...
//
$this-&gt;rep-&gt;gc-&gt;items[*group*]-&gt;sum(*level*).
</pre></div>
</div>
<p>Example:
.. code-block:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$this-&gt;rep = new Report();
$gc = $this-&gt;rep-&gt;gc;
// Sum of group in the group above the current group.
$gc-&gt;sum(-1);
// sum of group  data dimensions at group level = 2
$rc-&gt;sum(2);
// sum of rows read in data dimensions 0 at current group level
$rep-&gt;rc-&gt;{0}-&gt;sum();
$rep-&gt;rc-&gt;items[0]-&gt;sum();     // That&#39;s the same
// sum of rows read in data dimensions 1 at group level = 2
$rep-&gt;rc-&gt;{1}-&gt;sum(2);
$rep-&gt;rc-&gt;items[1]-&gt;sum(2);     // That&#39;s the same
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="calculator.html" class="btn btn-neutral float-right" title="Calculator" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="calculation.html" class="btn btn-neutral float-left" title="Calculation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Günter Pöhl

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>