

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Group changes &mdash; phpReport 2.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Aggregation" href="aggregation.html" />
    <link rel="prev" title="Data output" href="dataOutput.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> phpReport
          

          
          </a>

          
            
            
              <div class="version">
                2.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="actions.html">Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="prototype.html">Prototyping</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataInput.html">Data input</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataOutput.html">Data output</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Group changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="aggregation.html">Aggregation</a></li>
<li class="toctree-l1"><a class="reference internal" href="gettingValues.html">Getting values</a></li>
<li class="toctree-l1"><a class="reference internal" href="sugar.html">Methods returning information</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods.html">Overview of methods and properties</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">phpReport</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Group changes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/gpoehl/phpReport/blob/master//docs/group.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="group-changes">
<h1>Group changes<a class="headerlink" href="#group-changes" title="Permalink to this headline">¶</a></h1>
<p>Compexity in applications usually grows exceptionlly with every addidtional group
which needs to be managed.</p>
<p>With <strong>phpReport</strong> you only need to call the group() method once for every group.
Groups can be controlled in every data dimension. Just call the
group() method after calling the related data() method.</p>
<p>A group change occurs when within a data dimension when group values of the previous
row don’t equal those of the current row.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Data don’t need to be sorted by groups. But make sure that
rows are grouped by the group field or you might raise
unwanted group changes.</p>
</div>
<p>Once a group change has been detected the appropiate action methods (group headers
and group footers) will be executed.</p>
<dl class="method">
<dt id="group">
<code class="sig-name descname">group</code><span class="sig-paren">(</span><em class="sig-param">$name</em>, <em class="sig-param">$value = null</em>, <em class="sig-param">$headerAction = null</em>, <em class="sig-param">$footerAction = null</em>, <em class="sig-param">...params</em><span class="sig-paren">)</span><a class="headerlink" href="#group" title="Permalink to this definition">¶</a></dt>
<dd><p>Declare a data group.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>$name</strong> (<em>string</em>) – The name to be used for this group.
This name will be used to build method names for group headers and footers
(depending on configuration parameters). Must be unique between all dimensions.
All group related values (including cumulated values from sum or sheet methods
as well as row and group counters) can be retrieved by this group name or the group level.</p></li>
<li><p><strong>$value</strong> (<em>mixed</em>) – Source of the group value. Use the attribute name
when data row is an object or the key name when data row is an array.
It’s also possiblbe to use a callable (a closure or an array having
class and method parameters) expecting $row and $rowKey as parameters.
When the $value parameter is null it defaults to the content of $name parameter.</p></li>
<li><p><strong>$headerAction</strong> (<em>mixed</em>) – Set individual group header action.
Null to execte the default action. False to deny any action.</p></li>
<li><p><strong>$footerAction</strong> (<em>mixed</em>) – Set individual group footer action.
Null to execte the default action. False to deny any action.</p></li>
<li><p><strong>$params</strong> (<em>mixed</em>) – Variadic parameters to be passed to callables declared
with value parameter.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>$this which allows method call chaining.</p>
</dd>
</dl>
</dd></dl>

<p>Example</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$rep</span> <span class="o">=</span> <span class="p">(</span><span class="k">new</span> <span class="nx">Report</span> <span class="p">(</span><span class="nv">$this</span><span class="p">))</span>
<span class="o">-&gt;</span><span class="na">data</span><span class="p">(</span><span class="s1">&#39;object&#39;</span><span class="p">)</span>
<span class="o">-&gt;</span><span class="na">group</span> <span class="p">(</span><span class="s1">&#39;region&#39;</span><span class="p">)</span>
<span class="o">-&gt;</span><span class="na">group</span> <span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="nx">fn</span><span class="p">(</span><span class="nv">$row</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$row</span><span class="o">-&gt;</span><span class="na">saleDate</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="o">-&gt;</span><span class="na">group</span> <span class="p">(</span><span class="s1">&#39;month&#39;</span><span class="p">,</span> <span class="nx">fn</span><span class="p">(</span><span class="nv">$row</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$row</span><span class="o">-&gt;</span><span class="na">saleDate</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="o">-&gt;</span><span class="na">group</span> <span class="p">(</span><span class="s1">&#39;customer&#39;</span><span class="p">,</span> <span class="s1">&#39;customerID&#39;</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="s1">&#39;&lt;/table&gt;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The above example declares four groups (group level 1 to 4) to be monitored.
Instead of executing the customer footer action the string ‘&lt;/table&gt;’ will be
appended to the $output property.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Group level 0 is always the top level which is called grandTotal.</p>
</div>
<p>For each declared group a group counter will be instantiated and incremented when
a group change occurs. See ‘Calculation’ for details.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="aggregation.html" class="btn btn-neutral float-right" title="Aggregation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="dataOutput.html" class="btn btn-neutral float-left" title="Data output" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Günter Pöhl

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>